#define X(a,b) (*i==a)-(*i==b)
#define Z(a,o,p) if(*i==a&&o*m)do r+=X(a,(a^6)),i p;while(r);
r;char M[30000],I[10000],*m=M,*i=I;main(c){gets(i);for(;*m+=X(43,45),m+=X(62,60),*i==44?c=getchar(),c<0||(*m=c):*i==46&&putchar(*m),*i;i++)Z(91,!,++)else Z(93,,--)}
