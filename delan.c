#define X(a,b) (*i==a)-(*i==b)
r;char M[30000],I[10000],U[10000],*m=M,*i=I,*u=U;main(){gets(i);gets(u);for(;*m+=X(43,45),m+=X(62,60),*i==44?*m=*u++:*i==46&&putchar(*m),*i;i++)if(*i==91&&!*m)do r+=X(91,93),i++;while(r);else if(*i==93&&*m)do r+=X(93,91),i--;while(r);}
